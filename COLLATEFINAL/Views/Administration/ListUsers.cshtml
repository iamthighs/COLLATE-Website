@model IEnumerable<AppIdentityUser>

@{
    ViewData["Title"] = "All Users";
    ViewData["ActivePage"] = ManageSidebar.Administration;
}


<style>
    .avatar {
        display: inline-flex;
        height: 2rem;
        width: 2rem;
        border-radius: 50%;
        position: relative;
        align-items: center;
        justify-content: center;
    }

        .avatar .avatar-img {
            border-radius: 100%;
            -o-object-fit: cover;
            object-fit: cover;
            height: 2rem;
            width: auto;
        }

    .avatar-xs {
        height: 1.25rem;
        width: 1.25rem;
    }

        .avatar-xs .avatar-img {
            height: 1rem;
        }

    .avatar-sm {
        height: 1.75rem;
        width: 1.75rem;
    }

        .avatar-sm .avatar-img {
            height: 1.5rem;
        }

    .avatar-lg {
        height: 2.5rem;
        width: 2.5rem;
    }

        .avatar-lg .avatar-img {
            height: 2.5rem;
        }

    .avatar-xl {
        height: 3rem;
        width: 3rem;
    }

        .avatar-xl .avatar-img {
            height: 3rem;
        }

    .avatar-xxl {
        height: 3.75rem;
        width: 3.75rem;
    }

        .avatar-xxl .avatar-img {
            height: 3.75rem;
        }

    .avatar-busy::before,
    .avatar-idle::before,
    .avatar-offline::before,
    .avatar-online::before {
        content: "";
        position: absolute;
        bottom: 5%;
        right: 5%;
        width: 20%;
        height: 20%;
        border-radius: 50%;
        background-color: #d4dae3;
        border: 0.0625rem solid #fff;
    }

    .avatar-busy::before {
        background-color: #e81500;
    }

    .avatar-idle::before {
        background-color: #f4a100;
    }

    .avatar-offline::before {
        background-color: #d4dae3;
    }

    .avatar-online::before {
        background-color: #00ac69;
    }

    .img-fluid {
        max-width: 100%;
        height: auto;
    }
</style>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" />
<!-- Page Wrapper -->
<div id="wrapper">

    <!-- Sidebar -->
    <partial name="_ManageSidebar" />
    <!-- End of Sidebar -->
    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

        <!-- Main Content -->
        <div id="content">

            <!-- Topbar -->
            <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

                <!-- Sidebar Toggle (Topbar) -->
                <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
                    <i class="fa fa-bars"></i>
                </button>


                <!-- Topbar Navbar -->
                <ul class="navbar-nav ml-auto">









                    <!-- Nav Item - User Information -->
                    <partial name="_LoginPartialProfileUser" />

                </ul>

            </nav>
            <!-- End of Topbar -->
            <!-- Begin Page Content -->
            <div class="container-fluid">
                <partial name="_Notification" />
                <ul class="breadcrumb">
                    <li class="text-dark">Administration</li>
                </ul>


                <a class="btn btn-primary mb-3" style="width:auto" asp-area="Identity" asp-page="/Account/RegisterAdmin">Register a User</a>

                
                <div class="row">
                    <div class="col-xl-6 col-xxl-12">
                        <!-- Team members / people dashboard card example-->
                        <div class="card mb-4">
                            <div class="card-header">All Users</div>
                            <div class="card-body">


                                @if (Model.Any())
                                {
                                    foreach (var user in Model)
                                    {
                                        <!-- Item 1-->
                                        <div class="d-flex align-items-center justify-content-between mb-4">
                                            <div class="d-flex align-items-center flex-shrink-0 me-3">
                                                <div class="avatar avatar-xl me-3 bg-gray-200"><img class="avatar-img img-fluid" src="~/UserImages/@user.ImageUrl" alt="" /></div>
                                                <div class="d-flex flex-column fw-bold">
                                                    <a class="ml-3 text-dark line-height-normal mb-1" asp-action="ProfileUser" asp-controller="Administration" asp-route-id="@user.Id">@user.FirstName @user.LastName</a>
                                                    <div class="ml-3 small text-muted line-height-normal">@user.Email</div>
                                                </div>
                                            </div>
                                            <div class="dropdown no-arrow">
                                                <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                                                   data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                    <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                                     aria-labelledby="dropdownMenuLink">
                                                    <div class="dropdown-header">Manage a User:</div>
                                                    <a asp-action="EditUser" asp-controller="Administration" asp-route-id="@user.Id" class="dropdown-item">Edit</a>
                                                    <div class="dropdown-divider"></div>
                                                    <a class="dropdown-item text-danger" data-toggle="modal" data-target="#deleteModal_@user.Id">Delete</a>

                                                    
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Delete Modal-->
                                        <div class="modal fade" id="deleteModal_@user.Id" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                                             aria-hidden="true">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalLabel">Delete a User</h5>
                                                        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                                                            <span aria-hidden="true">×</span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body">Are you sure you want to delete @user.FirstName ?</div>
                                                    <div class="modal-footer">
                                                        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                                                        <form class="form-inline" asp-action="DeleteUser" asp-route-id="@user.Id" method="post">

                                                            <button type="submit" class="btn btn-primary">Delete</button>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                    }

                                }
                                else
                                {
                                    <div class="card-body">
                                        <h5 class="card-title">
                                            No Users created yet, Use the button below to register a user
                                        </h5>
                                        <a class="btn btn-primary" style="width:auto" asp-area="Identity" asp-page="/Account/Register">
                                            Create User
                                        </a>
                                    </div>
                                        
                                }
                                
                                
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <!-- /.container-fluid -->

        </div>
        <!-- End of Main Content -->
        <!-- Footer -->
        <partial name="_Footer" />

        <!-- End of Footer -->

    </div>
    <!-- End of Content Wrapper -->

</div>
<!-- End of Page Wrapper -->
<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
</a>

<!-- Logout Modal-->
<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
            <div class="modal-footer">
                <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                <a class="btn btn-primary" href="login.html">Logout</a>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/CustomScripts.js"></script>
}